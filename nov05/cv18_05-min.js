var boids=[];function setup(){createCanvas(500,500);for(var i=0;i<10;i++)boids[i]=new Boid(random(width),random(height))}function draw(){background("#222");for(var i=0;i<boids.length;i++)boids[i].run(boids)}function Boid(i,t){this.acceleration=createVector(0,0),this.velocity=p5.Vector.random2D(),this.position=createVector(i,t),this.r=3,this.maxspeed=3,this.maxforce=.05,this.prevPosition=createVector(this.position.x,this.position.y)}Boid.prototype.run=function(i){this.flock(i),this.update(),this.borders(),this.render()},Boid.prototype.applyForce=function(i){this.acceleration.add(i)},Boid.prototype.flock=function(i){var t=this.separate(i),o=this.align(i),s=this.cohesion(i);t.mult(2.5),o.mult(1),s.mult(1),this.applyForce(t),this.applyForce(o),this.applyForce(s)},Boid.prototype.update=function(){this.velocity.add(this.acceleration),this.velocity.limit(this.maxspeed),this.position.add(this.velocity),this.acceleration.mult(0)},Boid.prototype.seek=function(i){var t=p5.Vector.sub(i,this.position);t.normalize(),t.mult(this.maxspeed);var o=p5.Vector.sub(t,this.velocity);return o.limit(this.maxforce),o},Boid.prototype.render=function(){fill(127,127),stroke(200),ellipse(this.position.x,this.position.y,3,3),stroke(240),line(this.position.x,this.position.y,this.prevPosition.x,this.prevPosition.y),this.prevPosition.x=this.position.x,this.prevPosition.y=this.position.y},Boid.prototype.borders=function(){this.position.x<-this.r&&(this.position.x=width+this.r),this.position.y<-this.r&&(this.position.y=height+this.r),this.position.x>width+this.r&&(this.position.x=-this.r),this.position.y>height+this.r&&(this.position.y=-this.r)},Boid.prototype.separate=function(i){for(var t=25,o=createVector(0,0),s=0,e=0;e<i.length;e++){var r=p5.Vector.dist(this.position,i[e].position);if(0<r&&r<t){var n=p5.Vector.sub(this.position,i[e].position);n.normalize(),n.div(r),o.add(n),s++}}return 0<s&&o.div(s),0<o.mag()&&(o.normalize(),o.mult(this.maxspeed),o.sub(this.velocity),o.limit(this.maxforce)),o},Boid.prototype.align=function(i){for(var t=50,o=createVector(0,0),s=0,e=0;e<i.length;e++){var r=p5.Vector.dist(this.position,i[e].position);0<r&&r<t&&(o.add(i[e].velocity),s++)}if(0<s){o.div(s),o.normalize(),o.mult(this.maxspeed);var n=p5.Vector.sub(o,this.velocity);return n.limit(this.maxforce),n}return createVector(0,0)},Boid.prototype.cohesion=function(i){for(var t=50,o=createVector(0,0),s=0,e=0;e<i.length;e++){var r=p5.Vector.dist(this.position,i[e].position);0<r&&r<t&&(o.add(i[e].position),s++)}return 0<s?(o.div(s),this.seek(o)):createVector(0,0)};